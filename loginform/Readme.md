# Отчет по лабораторной работе "HTTP аутентификация"

## Цель работы:
Спроектировать и разработать систему авторизации пользователей на протоколе HTTP.

## Ход работы
### Пользовательский интерфейс

###### Диаграма работы программы
Диагамма представлена в файле **diagram.jpg**

<image src="diagram.jpg">

---

При входе на сайт пользователь попадает на страницу ***/login.php***, которая является главной страницей сайта. На этой странице находится форма авторизации
###### 1. **login.php**
Страница с формой авторизации. Если у пользователя нет аккаунта, то он может нажать на соответствующую кнопку и произойдет перенаправление на страницу ***/Registration.php***. При клике на кнопку "Auth" выполняется скрипт ***signinForm.php***.
###### 2. **Registration.php**
Страница с формой регистрации. Если у пользователя есть аккаунт, то он может нажать на соответствующую кнопку и произойдет перенаправление на страницу ***/login.php***. При клике на кнопку "Register" выполняется скрипт ***SignUPForm.php***.
###### 3. **auth.php**
Скрипт, который выполняется при попытке авторизации пользователя на сайте. Он подключается к базе данных, откуда берет строку с логином, введенным в форме. Если строка не обнаружена, то выведется ошибка. С помощью функции `password_verify($_POST['pass'], $row['pass'])` пароль сравнивается с хешем пароля, который хранится в базе данных и если проверка пройдена то пользователь получает COOKIE и перенаправляется на страницу ***/main.php*** если проверка не пройдена то выводитс соответствующая ошибка
###### 4. **SignUPForm.php**
Скрипт, который выполняется при попытке регистрации пользователя на сайте. Он выполняет проверку на корректность введенных данных и соответствие пароля и подтверждения пароля, если какая-либо из проверок не пройдена то выводится соответствующая ошибка. Скрипт подключается к базе данных и аналогично с формой авторизации ищется строка с введенным логином, если такая строка нашлась то выводится ошибка, `Пользователь с таким логином уже зарегистрирован`. С помощью функции `password_hash($pass, PASSWORD_DEFAULT)` пароль хешируется и все значения введенные заносятся в базу данных, где присутствует *id* *login* *password* пользователь получает COOKIE и перенаправляется на страницу ***/main.php***
###### 5. **user.php**
Страница, выводящая имя авторизированного пользователя и кнопку выхода. При клике на которую происходит редирект на страницу ***exit.php***
###### 6. **exit.php**
Скрипт, который удаляет COOKIE у пользователя

### База данных
#### lab_1
| id | login | pass |

В этой таблице:

- **id** - уникальный идентификатор пользователя (int);

- **login** - имя пользователя (varchar(100));

- **pass** - хэш пароля (varchar(60));

### Вывод
Спроектировал и разработал простейшую систему авторизации пользователей на протоколе HTTP.
